(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217b18"],{c88e:function(e,t,s){"use strict";s.r(t);s("99af"),s("caad"),s("2532"),s("a9e3");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-content"},[t("b-card",{staticClass:"farm-select-card mb-4"},[t("b-row",[t("b-card",{staticClass:"col-lg-4 inner-small"},[t("h3",{staticClass:"card-title"},[e._v("농장")]),t("div",{staticClass:"custom-scroll",staticStyle:{"max-height":"95px"}},e._l(e.farmBtnText,(function(s){return t("div",{key:s,staticClass:"d-inline-block"},[t("DefaultButton",{staticClass:"btn-primary m-1",class:{"btn-line-fill-secondary m-1":s!==e.farmSelected,"btn-secondary m-1":s===e.farmSelected},attrs:{btnText:s,buttonColorProps:e.buttonPrimaryColor,modalOpen:e.showModal,modalClose:e.hideModal,buttonFunc:e.onClickFarm}})],1)})),0)]),t("b-card",{staticClass:"col-lg-4 inner-small mid"},[t("h3",{staticClass:"card-title"},[e._v("사육업체 농장 "),t("img",{staticClass:"right-arrow",attrs:{src:s("07f4"),alt:"Right Arrow"}}),e._v("시설동 ")]),t("div",{staticClass:"custom-scroll",staticStyle:{"max-height":"95px"}},e._l(e.sectionBtnText,(function(s){return t("div",{key:s,staticClass:"d-inline-block"},[t("DefaultButton",{class:{"btn-line-fill-secondary m-1":s!==e.sectionSelected,"btn-secondary m-1":s===e.sectionSelected},attrs:{btnText:s,buttonColorProps:e.buttonSecondaryColor,modalOpen:e.showModal,modalClose:e.hideModal,buttonFunc:e.onClickSection}})],1)})),0)]),t("b-card",{staticClass:"col-lg-4 inner-small"},[t("h3",{staticClass:"card-title"},[e._v("사육업체 농장 "),t("img",{staticClass:"right-arrow",attrs:{src:s("07f4"),alt:"Right Arrow"}}),e._v("시설동 외부박스 ")]),t("div",{staticClass:"custom-scroll",staticStyle:{height:"95px"}},e._l(e.conveyorNameData,(function(s){return t("div",{key:s,staticClass:"d-inline-block"},[t("DefaultButton",{class:{"btn-line-fill-secondary m-1":s!==e.conveyorSelected,"btn-dark m-1":s===e.conveyorSelected},attrs:{btnText:"컨배이어벨트 ".concat(s,"-Line"),buttonColorProps:e.buttonDarkColor,modalOpen:e.showModal,modalClose:e.hideModal,buttonFunc:e.onClickConveyor}})],1)})),0)])],1)],1),t("b-card",{staticClass:"sensor-info-card mb-4"},[t("div",{staticClass:"sensor-section-row col-lg-12 d-flex"},[t("h3",{staticClass:"card-title"},[e._v("센서")]),t("span",{staticClass:"update-date"},[e._v("업데이트 "+e._s(e.updateTime))])]),t("b-row",[!0===e.sectionOn?t("div",{staticClass:"sensor-view-row col-lg-6"},[t("div",{staticClass:"sensor-left-view-card"},[t("div",{staticClass:"card-body d-flex flex-wrap"},e._l(e.sensorOption,(function(s){return t("div",{key:s},[t("h6",{class:{"select-sensor-info":e.sensorMode===s,"notSelect-sensor-info":e.sensorMode!==s},on:{click:e.sensorTextFunc}},[e._v(e._s(s))])])})),0)]),t("div",{staticClass:"custom-scroll mb-3 mb-lg-0",staticStyle:{height:"95px"}},e._l(e.sensorTypeData,(function(s,a){return t("div",{key:a,staticClass:"d-inline-block"},[t("div",{staticClass:"main-content-radio selected"},[t("div",{staticClass:"radio-btn d-flex flex-wrap"},[t("label",{staticClass:"radio time",class:{"d-none":"0"===s[0]}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.radioValues,expression:"radioValues"}],attrs:{type:"radio",name:"radio"},domProps:{value:s,checked:e._q(e.radioValues,s)},on:{change:function(t){e.radioValues=s}}}),t("span",{staticClass:"radio-text"},[e._v(e._s(s[0]))]),t("span",{staticClass:"checkmark"})])])])])})),0)]):t("div",{staticClass:"sensor-view-row col-lg-6"},[t("div",{staticClass:"sensor-left-view-card"},[t("div",{staticClass:"card-body d-flex flex-wrap"},e._l(e.conveyorSensorData,(function(s,a){return t("div",{key:a},[t("h6",{class:{"select-sensor-info":e.sensorMode==="".concat(e.conveyorSelected,"-").concat(s[0]),"notSelect-sensor-info":e.sensorMode!=="".concat(e.conveyorSelected,"-").concat(s[0])},on:{click:e.conveyorSensorTextFunc}},[e._v(e._s(e.conveyorSelected)+"-"+e._s(s[0]))])])})),0)]),t("div",{staticClass:"custom-scroll mb-3 mb-lg-0",staticStyle:{height:"95px"}},e._l(e.conveyorSensorType,(function(s,a){return t("div",{key:a,staticClass:"d-inline-block"},[t("div",{staticClass:"main-content-radio selected"},[t("div",{staticClass:"radio-btn d-flex flex-wrap"},[t("label",{staticClass:"radio time",class:{"d-none":"0"===s[0]}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.radioValues,expression:"radioValues"}],attrs:{type:"radio",name:"radio"},domProps:{value:s,checked:e._q(e.radioValues,s)},on:{change:function(t){e.radioValues=s}}}),t("span",{staticClass:"radio-text"},[e._v(e._s(s[0]))]),t("span",{staticClass:"checkmark"})])])])])})),0)]),t("div",{staticClass:"sensor-view-row col-lg-6"},[t("h3",{staticClass:"card-title"},[e._v("기준값")]),e.sensorMode.includes("온도")?t("div",[t("b-row",[t("b-col",[t("span",[e._v("MIN")]),t("div",{staticClass:"d-flex align-items-end"},[t("b-input",{staticClass:"mr-2",attrs:{type:"number",size:"sm"},model:{value:e.minValue,callback:function(t){e.minValue=t},expression:"minValue"}}),t("p",[e._v("°C")])],1)]),t("b-col",[t("span",[e._v("MAX")]),t("div",{staticClass:"d-flex align-items-end"},[t("b-input",{staticClass:"mr-2",attrs:{type:"number",size:"sm"},model:{value:e.maxValue,callback:function(t){e.maxValue=t},expression:"maxValue"}}),t("p",[e._v("°C")])],1)])],1)],1):e.sensorMode.includes("습도")?t("div",[t("b-row",[t("b-col",[t("span",[e._v("MIN")]),t("div",{staticClass:"d-flex align-items-end"},[t("b-input",{staticClass:"mr-2",attrs:{type:"number",size:"sm"},model:{value:e.minValue,callback:function(t){e.minValue=t},expression:"minValue"}}),t("p",[e._v("%")])],1)]),t("b-col",[t("span",[e._v("MAX")]),t("div",{staticClass:"d-flex align-items-end"},[t("b-input",{staticClass:"mr-2",attrs:{type:"number",size:"sm"},model:{value:e.maxValue,callback:function(t){e.maxValue=t},expression:"maxValue"}}),t("p",[e._v("%")])],1)])],1)],1):e.sensorMode.includes("조도")?t("div",[t("b-row",[t("b-col",[t("span",[e._v("MIN")]),t("div",{staticClass:"d-flex align-items-end"},[t("b-input",{staticClass:"mr-2",attrs:{type:"number",size:"sm"},model:{value:e.minValue,callback:function(t){e.minValue=t},expression:"minValue"}}),t("p",[e._v("lux")])],1)]),t("b-col",[t("span",[e._v("MAX")]),t("div",{staticClass:"d-flex align-items-end"},[t("b-input",{staticClass:"mr-2",attrs:{type:"number",size:"sm"},model:{value:e.maxValue,callback:function(t){e.maxValue=t},expression:"maxValue"}}),t("p",[e._v("lux")])],1)])],1)],1):t("div",[t("b-row",[t("b-col",[t("span",[e._v("MIN")]),t("div",{staticClass:"d-flex align-items-end"},[t("b-input",{staticClass:"mr-2",attrs:{type:"number",size:"sm"},model:{value:e.minValue,callback:function(t){e.minValue=t},expression:"minValue"}}),t("p",[e._v("ppm")])],1)]),t("b-col",[t("span",[e._v("MAX")]),t("div",{staticClass:"d-flex align-items-end"},[t("b-input",{staticClass:"mr-2",attrs:{type:"number",size:"sm"},model:{value:e.maxValue,callback:function(t){e.maxValue=t},expression:"maxValue"}}),t("p",[e._v("ppm")])],1)])],1)],1),t("div",[t("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-2",modifiers:{"collapse-2":!0}}],staticClass:"mt-3"},[e._v("제어 조건 설정")]),t("b-collapse",{attrs:{id:"collapse-2"}},[t("div",{staticClass:"d-flex align-items-end"},[t("h5",{staticClass:"farm-sensor-controltext"},[e._v("MIN 미만시")]),t("b-form-select",{staticClass:"farm-sensor-setting mt-4 mr-3 ml-3",attrs:{options:e.settingCondition},model:{value:e.minControlSensorSelected,callback:function(t){e.minControlSensorSelected=t},expression:"minControlSensorSelected"}},[t("b-form-select-option",{attrs:{value:e.minControlSensorSelected,disabled:""}},[e._v("미설정시 PUSH 알림만 전송")])],1),t("b-form-input",{staticClass:"farm-sensor-input mr-2",attrs:{type:"number",placeholder:"출력 값(0,1,2...)"},model:{value:e.minControlSensorValue,callback:function(t){e.minControlSensorValue=t},expression:"minControlSensorValue"}}),t("h5",{staticClass:"farm-sensor-controltext"},[e._v("장치 가동")])],1),t("div",{staticClass:"d-flex align-items-end"},[t("h5",{staticClass:"farm-sensor-controltext"},[e._v("MAX 초과시")]),t("b-form-select",{staticClass:"farm-sensor-setting mt-3 mr-3 ml-3",attrs:{options:e.settingCondition},model:{value:e.maxControlSensorSelected,callback:function(t){e.maxControlSensorSelected=t},expression:"maxControlSensorSelected"}},[t("b-form-select-option",{attrs:{value:e.maxControlSensorSelected,disabled:""}},[e._v("미설정시 PUSH 알림만 전송")])],1),t("b-form-input",{staticClass:"farm-sensor-input mr-2",attrs:{type:"number",placeholder:"출력 값(0,1,2...)"},model:{value:e.maxControlSensorValue,callback:function(t){e.maxControlSensorValue=t},expression:"maxControlSensorValue"}}),t("h5",{staticClass:"farm-sensor-controltext"},[e._v("장치 가동")])],1)])],1),t("div",{staticClass:"mt-3 text-right"},[t("DefaultButton",{staticClass:"btn-primary",attrs:{btnText:e.settingBtnText,buttonColorProps:e.settingBtnColor,modalOpen:e.showModal,modalClose:e.hideModal,buttonFunc:e.onRegisterFunc}})],1)])])],1),t("SensorControlModal",{attrs:{farmInfo:e.farmSelected,sectionInfo:e.sectionSelected,conveyorInfo:e.conveyorSelected,selectedMinSensor:e.minControlSensorSelected,selectedMaxSensor:e.maxControlSensorSelected,selectedMinSensorValue:Number(e.minControlSensorValue),selectedMaxSensorValue:Number(e.maxControlSensorValue),conditionals:e.settingCondition,conditionalsSelected:e.radioValues,allData:e.allSensor,minNum:Number(e.minValue),maxNum:Number(e.maxValue)}}),t("b-card",{staticClass:"sensor-alarm-card"},[t("h3",{staticClass:"card-title"},[e._v("센서알림 설정 현황")]),t("NoneSearchWriteboard",{attrs:{farmInfo:e.farmSelected,sectionInfo:e.sectionSelected,conveyorInfo:e.conveyorSelected,change:e.buttonChange}})],1)],1)},n=[],o=s("c7eb"),i=s("1da1"),l=s("5530"),r=(s("d81d"),s("14d9"),s("a630"),s("3ca3"),s("d3b7"),s("6062"),s("ddb0"),s("4e82"),s("0481"),s("4069"),s("4de4"),s("cb29"),s("2f62")),c=s("fe63"),d=s("17b5"),m=s("18d88"),u=s("c1df"),p=s.n(u),h=s("cee4");s("ed18").config();var v={name:"FarmManagement",metaInfo:{title:"Farms"},data:function(){return{farmBtnText:[],sectionBtnText:[],sectionTitle:[],sensorTypeData:[],conveyorNameData:[],conveyorSensorData:[],buttonSecondaryColor:"secondary",buttonPrimaryColor:"primary",buttonDarkColor:"outline-dark",sensorOption:[],selectedSensorId:[],hideModal:!1,showModal:!1,showSensorModal:!0,farmSelected:"",sectionSelected:"",conveyorSelected:"",allSensor:[],sectionOn:!0,buttonChange:!1,sensorMode:"",radioValues:[],tagList:[],sectionArray:[],allSensorInfo:[],sensorPathInfo:[],path:"",selectedSensorInfo:"",tagName:"",minValue:0,maxValue:100,settingBtnText:"설정",settingBtnColor:"primary",sectionBtnColor:"secondary",selectedSensor:"",updateTime:"",minControlSensorSelected:[],maxControlSensorSelected:[],minControlSensorValue:0,maxControlSensorValue:50,modalId:"modal-sensorControl",settingCondition:[],rows:[]}},computed:Object(l["a"])({},Object(r["c"])(["tokenRead","userInfoRead"])),watch:{},methods:{makeToast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(t,{title:" ".concat(e||"default"),variant:e,solid:!0})},onClickFarm:function(e){var t=this;this.farmSelected===e.target.__vue__._props.btnText?(this.farmSelected=e.target.__vue__._props.btnText,this.conveyorSelected="",this.sectionOn=!0):(this.farmSelected=e.target.__vue__._props.btnText,this.conveyorSelected="",this.sectionOn=!0,this.sensorOption=[],this.conveyorNameData=[],this.sectionArray=[],this.allSensor=[],this.allSensorInfo=[],this.comparisonTarget=[],this.sensorMode=""),this.sectionBtnText=[],this.sectionArray=[],this.sectionSelected="",this.tagList.map((function(e){t.farmSelected===e.split("/")[0]&&(void 0===e.split("/")[2]?(t.sectionArray.push(e.split("/")[1]),t.sectionBtnText.push(e.split("/")[1]),t.sectionBtnText=Array.from(new Set(t.sectionBtnText))):(t.sectionArray.push("".concat(e.split("/")[1],"/").concat(e.split("/")[2])),t.sectionBtnText.push(e.split("/")[1]),t.sectionBtnText=Array.from(new Set(t.sectionBtnText))))}))},onClickSection:function(e){var t=this;this.rows=[],this.rowBucket=[],this.settingCondition=[],this.conveyorNameData=[],this.conveyorSensorData=[],this.sectionArray=[],this.sensorTypeData=[],this.allSensorInfo=[],this.sensorOption=[],this.sectionSelected===e.target.__vue__._props.btnText?(this.sectionSelected=e.target.__vue__._props.btnText,this.conveyorNameData=Array.from(new Set(this.conveyorNameData)),this.conveyorSelected="",this.sectionOn=!0):(this.sectionSelected=e.target.__vue__._props.btnText,this.conveyorNameData=Array.from(new Set(this.conveyorNameData)),this.conveyorSelected="",this.sectionOn=!0,this.buttonChange=!this.buttonChange,this.comparisonTarget=[],this.sensorOption=[],this.sensorTypeData=[],this.comparisonTarget=[],this.sensorMode=""),this.tagList.map((function(e){t.farmSelected&&t.sectionSelected&&"".concat(e.split("/")[0],"/").concat(e.split("/")[1])==="".concat(t.farmSelected,"/").concat(t.sectionSelected)&&h["a"].get("".concat("https://foodycubeems.com","/device?limit=10000&page=1&tag=").concat(e,"&token=").concat(t.tokenRead)).then((function(e){e.data.message.results?(t.allSensor=e.data.message.results.map((function(e){return e})),t.allSensorInfo.push(t.allSensor),t.allSensor.map((function(e){void 0!==e.tag.split("/")[2]?e.tag.includes("".concat(t.farmSelected,"/").concat(t.sectionSelected))&&(t.conveyorNameData.push(e.tag.split("/")[2]),t.conveyorNameData=Array.from(new Set(t.conveyorNameData)),t.conveyorNameData=t.conveyorNameData.sort()):e.tag==="".concat(t.farmSelected,"/").concat(t.sectionSelected)&&("input"===e.direction?t.sensorOption.push(e.devicelabel):t.settingCondition.push([e.devicelabel,e.devicepath]))})),t.allSensorInfo=t.allSensorInfo.flat()):t.makeToast("조회 실패","조회 가능한 시설동이 없습니다.")}))}))},onClickConveyor:function(e){var t=this;this.conveyorSelected===e.target.__vue__._props.btnText.split("-")[0].split(" ")[1]?this.conveyorSelected=e.target.__vue__._props.btnText.split("-")[0].split(" ")[1]:(this.conveyorSelected=e.target.__vue__._props.btnText.split("-")[0].split(" ")[1],this.conveyorSensorData=[],this.conveyorSensorType=[],this.settingCondition=[],this.sensorMode=null,this.sensorOption=[],this.sensorTypeData=[],this.comparisonTarget=[],this.buttonChange=!this.buttonChange,this.sensorMode="",this.allSensorInfo.map((function(e){e.tag==="".concat(t.farmSelected,"/").concat(t.sectionSelected,"/").concat(t.conveyorSelected)&&("input"===e.direction?t.conveyorSensorData.push([e.devicelabel]):t.settingCondition.push([e.devicelabel,e.devicepath]))}))),this.sectionOn=!1},sensorTextFunc:function(e){var t=this;this.sensorTypeData=[],this.comparisonTarget=[],this.sensorMode=e.target.innerText,this.allSensorInfo.map((function(e){e.tag==="".concat(t.farmSelected,"/").concat(t.sectionSelected)&&e.devicelabel.includes(t.sensorMode)&&(t.sensorTypeData=[[e.devicelabel,e.devicepath]])})),this.comparisonTarget=this.allSensorInfo.filter((function(e){return!e.devicelabel.includes(t.sensorMode)&&"input"===e.direction})),this.maxLen=Math.max(this.sensorTypeData.length,this.comparisonTarget.length),this.minLen=Math.min(this.sensorTypeData.length,this.comparisonTarget.length),this.resultLen=this.maxLen-this.minLen,this.minLen===this.sensorTypeData.length?this.sensorTypeData=this.sensorTypeData.concat(new Array(this.resultLen).fill(["0"])):this.comparisonTarget=this.comparisonTarget.concat(new Array(this.resultLen).fill(["0"]))},conveyorSensorTextFunc:function(e){var t=this;this.conveyorSensorType=[],this.comparisonTarget=[],this.sensorMode=e.target.innerText,this.allSensorInfo.map((function(e){e.tag==="".concat(t.farmSelected,"/").concat(t.sectionSelected,"/").concat(t.conveyorSelected)&&e.devicelabel.includes(t.sensorMode.split("-")[1])&&(t.conveyorSensorType=[[e.devicelabel,e.devicepath]])})),this.comparisonTarget=this.allSensorInfo.filter((function(e){return!e.devicelabel.includes(t.sensorMode)&&"input"===e.direction})),this.maxLen=Math.max(this.conveyorSensorType.length,this.comparisonTarget.length),this.minLen=Math.min(this.conveyorSensorType.length,this.comparisonTarget.length),this.resultLen=this.maxLen-this.minLen,this.minLen===this.sensorTypeData.length?this.conveyorSensorType=this.conveyorSensorType.concat(new Array(this.resultLen).fill(["0"])):this.comparisonTarget=this.comparisonTarget.concat(new Array(this.resultLen).fill(["0"]))},onClear:function(){this.radioValues=[]},onRegisterFunc:function(){this.radioValues.length>0?this.$bvModal.show(this.modalId):this.makeToast("설정 오류","센서와 기준 값이 설정되지 않았습니다.")}},created:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.farmBtnText=JSON.parse(localStorage.getItem("userInfo"))[0].tag,e.farmSelected=JSON.parse(localStorage.getItem("userInfo"))[0].tag[0],!(JSON.parse(localStorage.getItem("userInfo"))[0].tag.length>0)){t.next=7;break}return t.next=5,h["a"].get("".concat("https://foodycubeems.com","/user/grow?limit=10000&token=").concat(e.tokenRead)).then((function(t){t.data.message.results&&t.data.message.results.filter((function(t){e.tagList.push("".concat(t.farmlabel,"/").concat(t.growlabel)),e.sectionArray.push(t.growlabel),t.farmlabel===e.farmSelected&&(e.sectionBtnText.push(t.growlabel.split("/")[0]),e.sectionBtnText=Array.from(new Set(e.sectionBtnText)))}))}));case 5:t.next=8;break;case 7:e.makeToast("태그 오류","등록된 태그가 없습니다.");case 8:case"end":return t.stop()}}),t)})))()},mounted:function(){this.updateTime=p()().format("YYYY/MM/DD HH:mm:ss"),"sm"==this.$screen.breakpoint||"xs"==this.$screen.breakpoint||"md"==this.$screen.breakpoint?this.isMobile=!0:this.isMobile=!1},components:{DefaultButton:c["a"],NoneSearchWriteboard:d["a"],SensorControlModal:m["a"]}},f=v,b=s("2877"),S=Object(b["a"])(f,a,n,!1,null,null,null);t["default"]=S.exports}}]);