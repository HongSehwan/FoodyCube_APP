(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34869848"],{"29d8":function(t,e,a){},"4e34":function(t,e,a){"use strict";a("88bd")},6215:function(t,e,a){"use strict";a("29d8")},8468:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d9e2");function o(t){if(null==t)throw new TypeError("Cannot destructure "+t)}},"88bd":function(t,e,a){},f13c:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content admin-content"},[e("b-card",{staticClass:"mb-4"},[e("h1",{staticClass:"sub-title"},[t._v("CCTV 관리")]),e("b-row",[e("b-col",{attrs:{lg:"5 mb-3"}},[e("DatePicker",{attrs:{readOnlySelected:t.readOnlyDate},on:{dateValue:t.dateFunc}})],1),e("b-col",{staticClass:"text-right mb-3",attrs:{lg:"7"}},[e("DefaultButton",{attrs:{btnText:t.outlineDefaultText,buttonColorProps:t.outlineDefaultColor,buttonFunc:t.clearFunc}})],1)],1),e("b-row",[e("b-col",{staticClass:"mb-3",attrs:{lg:"5"}},[e("b-form-select",{attrs:{options:t.mainOptions},model:{value:t.mainSelected,callback:function(e){t.mainSelected=e},expression:"mainSelected"}})],1),e("b-col",{staticClass:"mb-3",attrs:{lg:"5"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:"검색어를 입력하세요"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})]),e("b-col",{staticClass:"text-right mb-3",attrs:{lg:"2"}},[e("DefaultButton",{attrs:{btnText:t.defaultButtonText,buttonColorProps:t.defaultButtonColor,modalOpen:t.showSearchModal,modalClose:t.hideSearchModal,buttonFunc:t.searchFunc}})],1)],1)],1),e("DefaultButton",{staticClass:"mb-4 ml-3 ml-md-0",attrs:{block:"",btnText:t.modalButtonText,buttonColorProps:t.defaultButtonColor,modalOpen:t.showModal,modalClose:t.hideModal,modalName:t.modalId}}),e("CCTVRegisterModal",{on:{tableRegisterFunc:t.onRegister}}),e("b-card",[e("b-row",{staticClass:"align-items-center"},[e("b-col",{staticClass:"admin-filter-list"},[e("b-form-select",{attrs:{options:t.subOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),e("div",{staticClass:"table-responsive"},[e("b-table",{ref:"table-adminModify",staticClass:"writeboardList",attrs:{id:"table-adminModify",items:t.filterTableItems,"current-page":t.currentPage,"per-page":t.perPage,fields:t.columns,"select-mode":t.tbselectMode,selectable:t.tbselectable,filter:t.tbfilter,"filter-included-fields":t.tbfilterOn,small:""},on:{filtered:t.onFiltered,"row-selected":t.onRowSelected}})],1),e("CCTVModifyModal",{on:{tableDeleteFunc:t.onDelete}}),e("b-pagination",{attrs:{"total-rows":t.resulttotal,"per-page":t.perPage,"aria-controls":"alarm-table",align:"center"},on:{input:function(e){return t.fcPagination()}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},n=[],c=a("c7eb"),l=a("1da1"),s=a("5530"),r=(a("99af"),a("d81d"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("14d9"),a("2f62")),i=a("e9f4"),d=a("fe63"),u=a("8468"),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"row"},[e("b-col",{attrs:{md:"6"}},[e("b-modal",{ref:"modal-cctvRegister",attrs:{id:"modal-cctvRegister",title:"CCTV 등록"},scopedSlots:t._u([{key:"modal-footer",fn:function(a){return Object(u["a"])(a),[e("b-row",[e("div",{staticClass:"modal-btn-list col text-right"},[e("DefaultButton",{attrs:{btnText:t.successBtn,buttonColorProps:t.successBtnColor,buttonFunc:t.onRegister}}),e("DefaultButton",{attrs:{block:"",btnText:t.cancelBtn,buttonColorProps:t.cancelBtnColor,modalOpen:t.showModal,modalClose:t.hideModal,modalName:t.modalId}})],1)])]}}])},[e("b-col",{staticClass:"form-group mb-2",attrs:{md:"12"}},[e("div",{staticClass:"col-form-label"},[t._v("CCTV 경로")]),e("b-form-input",{attrs:{placeholder:"http://xxx"},model:{value:t.cctvInfo.cctvpath,callback:function(e){t.$set(t.cctvInfo,"cctvpath",e)},expression:"cctvInfo.cctvpath"}})],1),e("b-col",{staticClass:"form-group mb-2",attrs:{md:"12"}},[e("div",{staticClass:"col-form-label"},[t._v("CCTV 채널")]),e("b-form-input",{attrs:{placeholder:"cam0"},model:{value:t.cctvInfo.cctvchannel,callback:function(e){t.$set(t.cctvInfo,"cctvchannel",e)},expression:"cctvInfo.cctvchannel"}})],1),e("b-col",{staticClass:"form-group mb-2",attrs:{md:"12"}},[e("div",{staticClass:"col-form-label"},[t._v("CCTV 표기")]),e("b-form-input",{attrs:{placeholder:"사육실 1번"},model:{value:t.cctvInfo.cctvlabel,callback:function(e){t.$set(t.cctvInfo,"cctvlabel",e)},expression:"cctvInfo.cctvlabel"}})],1),e("b-col",{staticClass:"form-group mb-2",attrs:{md:"12"}},[e("div",{staticClass:"col-form-label"},[t._v("농장명/재배동(Tag)")]),e("b-form-select",{attrs:{options:t.mainOptions},model:{value:t.cctvInfo.tag,callback:function(e){t.$set(t.cctvInfo,"tag",e)},expression:"cctvInfo.tag"}})],1)],1)],1)],1)])},b=[],h=a("cee4");a("ed18").config();var f={data:function(){return{buttonText:"등록하기",buttonColor:"primary",successBtn:"등록",successBtnColor:"primary",cancelBtn:"취소",cancelBtnColor:"line-fill-primary",hideModal:!0,showModal:!1,modalId:"modal-cctvRegister",mainOptions:[],cctvInfo:{cctvpath:"",cctvchannel:"",cctvlabel:"",tag:""}}},computed:Object(s["a"])({},Object(r["c"])(["loading","error","farmTagRead","tokenRead","userIdRead"])),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(r["d"])(["setFarmTag"])),Object(r["b"])(["farmTagReaded"])),{},{makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(e,{title:" ".concat(t||"default"),variant:t,solid:!0})},onRegister:function(){var t=this;if(this.cctvInfo.cctvpath)if(this.cctvInfo.cctvchannel)if(this.cctvInfo.cctvlabel)if(this.cctvInfo.tag){this.cctvInfo.reg_id=this.userIdRead;var e={token:this.tokenRead,cctvinfo:[{cctvpath:this.cctvInfo.cctvpath,cctvchannel:this.cctvInfo.cctvchannel,cctvlabel:this.cctvInfo.cctvlabel,tag:this.cctvInfo.tag,reg_id:this.cctvInfo.reg_id}]};h["a"].post("".concat("https://foodycubeems.com","/device/cctv"),e,{headers:{"Content-Type":"application/json"}}).then((function(a){0===a.data.errorcode?(t.$emit("tableRegisterFunc",e),t.$bvModal.hide(t.modalId)):t.makeToast("등록 실패","등록에 실패했습니다.")})).catch((function(e){t.makeToast("등록 실패","등록에 실패했습니다."),console.log(e)}))}else this.makeToast("등록 실패","태그를 선택해주세요.");else this.makeToast("등록 실패","CCTV 표기를 입력해주세요.");else this.makeToast("등록 실패","CCTV 채널을 입력해주세요.");else this.makeToast("등록 실패","CCTV 경로를 입력해주세요.")}}),created:function(){var t=this;h["a"].get("".concat("https://foodycubeems.com","/user/grow?limit=10000&token=").concat(this.tokenRead)).then((function(e){e.data.message.results&&e.data.message.results.map((function(e){t.mainOptions.push("".concat(e.farmlabel,"/").concat(e.growlabel))}))}))},components:{DefaultButton:d["a"]}},v=f,p=(a("6215"),a("2877")),g=Object(p["a"])(v,m,b,!1,null,null,null),C=g.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"row"},[e("b-col",{attrs:{md:"6"}},[e("b-modal",{ref:"modal-cctvModify",attrs:{id:"modal-cctvModify",title:"CCTV 조회"},scopedSlots:t._u([{key:"modal-footer",fn:function(a){return Object(u["a"])(a),[e("b-row",[e("div",{staticClass:"modal-btn-list col text-right"},[e("DefaultButton",{attrs:{btnText:t.deleteBtn,buttonColorProps:t.deleteBtnColor,buttonFunc:t.onDelete}}),e("DefaultButton",{attrs:{block:"",btnText:t.cancelBtn,buttonColorProps:t.cancelBtnColor,modalOpen:t.showModal,modalClose:t.hideModal,modalName:t.modalId}})],1)])]}}])},[e("b-col",{staticClass:"form-group mb-2",attrs:{md:"12"}},[e("div",{staticClass:"col-form-label"},[t._v("CCTV 경로")]),e("b-form-input",{attrs:{value:t.tbselectdata.cctvpath,readonly:""}})],1),e("b-col",{staticClass:"form-group mb-2",attrs:{md:"12"}},[e("div",{staticClass:"col-form-label"},[t._v("CCTV 채널")]),e("b-form-input",{attrs:{value:t.tbselectdata.cctvchannel,readonly:""}})],1),e("b-col",{staticClass:"form-group mb-2",attrs:{md:"12"}},[e("div",{staticClass:"col-form-label"},[t._v("CCTV 표기")]),e("b-form-input",{attrs:{value:t.tbselectdata.cctvlabel,readonly:""}})],1),e("b-col",{staticClass:"form-group mb-2",attrs:{md:"12"}},[e("div",{staticClass:"col-form-label"},[t._v("농장명/재배동(Tag)")]),e("b-form-input",{staticClass:"__readonly",attrs:{value:t.tbselectdata.tag,readonly:""}})],1)],1)],1)],1)])},y=[];a("ed18").config();var k={data:function(){return{buttonText:"등록하기",buttonColor:"primary",deleteBtn:"삭제",deleteBtnColor:"danger",successBtn:"수정",successBtnColor:"primary",cancelBtn:"취소",cancelBtnColor:"line-fill-primary",hideModal:!0,showModal:!1,modalId:"modal-cctvModify",mainSelected:"",mainOptions:[],tbselectdata:{}}},computed:Object(s["a"])({validation:function(){return this.userId.length>4&&this.userId.length<13}},Object(r["c"])(["tokenRead","userIdRead"])),methods:{onDelete:function(){this.$emit("tableDeleteFunc",this.tbselectdata)}},created:function(){this.$EventBus.$on("tableFunc",function(t){this.tbselectdata=t}.bind(this))},components:{DefaultButton:d["a"]}},D=k,I=(a("4e34"),Object(p["a"])(D,T,y,!1,null,null,null)),M=I.exports,x={metaInfo:{title:"CCTV Register"},data:function(){return{buttonText:"등록하기",buttonColor:"primary",outlineDefaultText:"옵션리셋",outlineDefaultColor:"line-fill-primary",defaultButtonText:"검색하기",defaultButtonColor:"primary",mainSelected:"전체",mainOptions:[{value:"전체",text:"전체"}],subOptions:[10,30,50,100,{value:1e4,text:"Show a lot"}],columns:[{label:"CCTV경로",key:"cctvpath"},{label:"채널",key:"cctvchannel"},{label:"표기",key:"cctvlabel"},{label:"태그",key:"tag"},{label:"등록자",key:"reg_id"}],filterTableItems:[],fields:[],tbselectMode:"single",tbselectable:!0,resulttotalRows:1,searchQuery:"",tbfilter:null,tbfilterOn:[],perPage:10,currentPage:1,oldPage:1,resulttotal:0,hideModal:!1,showModal:!0,showSearchModal:!1,hideSearchModal:!1,modalId:"modal-cctvRegister",modalId2:"modal-cctvModify",modalButtonText:"등록하기",modalButtonColor:"primary",dateVal:"",dateStart:"",dateEnd:"",readOnlyDate:!1}},components:{DatePicker:i["a"],DefaultButton:d["a"],CCTVRegisterModal:C,CCTVModifyModal:M},computed:Object(s["a"])({},Object(r["c"])(["tokenRead","userIdRead"])),mounted:function(){"sm"==this.$screen.breakpoint||"xs"==this.$screen.breakpoint||"md"==this.$screen.breakpoint?this.isMobile=!0:this.isMobile=!1},methods:{makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(e,{title:" ".concat(t||"default"),variant:t,solid:!0})},dateFunc:function(t){this.dateVal=t,this.startDate=new Date(this.dateVal[0]),this.endDate=new Date(this.dateVal[1]),this.dateVal&&(this.startYear=this.startDate.getFullYear(),this.startMonth=this.startDate.getMonth()+1>=10?this.startDate.getMonth()+1:"0".concat(this.startDate.getMonth()+1),this.startDay=this.startDate.getDate()>=10?this.startDate.getDate():"0".concat(this.startDate.getDate()),this.endYear=this.endDate.getFullYear(),this.endMonth=this.endDate.getMonth()+1>=10?this.endDate.getMonth()+1:"0".concat(this.endDate.getMonth()+1),this.endDay=this.endDate.getDate()>=10?this.endDate.getDate():"0".concat(this.endDate.getDate()),this.dateStart="".concat(this.startYear,"-").concat(this.startMonth,"-").concat(this.startDay," 00:00:00"),this.dateEnd="".concat(this.endYear,"-").concat(this.endMonth,"-").concat(this.endDay," 23:59:59"))},searchFunc:function(){var t=this;return Object(l["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.dateStart&&t.dateEnd?h["a"].get("".concat("https://foodycubeems.com","/device/cctv?limit=").concat(t.perPage,"&page=").concat(t.currentPage,"&datestart=").concat(t.dateStart,"&dateend=").concat(t.dateEnd,"&token=").concat(t.tokenRead)).then((function(e){e&&(t.dateSelected=e.data.message.results.map((function(t){return t})))})):h["a"].get("".concat("https://foodycubeems.com","/device/cctv?limit=100&token=").concat(t.tokenRead)).then((function(e){e&&(t.dateSelected=e.data.message.results.map((function(t){return t})))})),"전체"===t.mainSelected?t.resultSearchValue=t.dateSelected.filter((function(e){return e.admin_cctvPath.includes(t.searchQuery)||e.admin_cctvPath.includes(t.searchQuery)||e.admin_cctvCh.includes(t.searchQuery)||e.admin_cctvName.includes(t.searchQuery)||e.admin_cctvTag.includes(t.searchQuery)})):t.selection=t.dateSelected,t.filterTableItems=t.resultSearchValue;case 3:case"end":return e.stop()}}),e)})))()},clearFunc:function(){this.searchQuery="",this.mainSelected="전체"},fcPagination:function(){this.oldPage!=this.currentPage&&(this.oldPage=this.currentPage,this.tbfilter=null)},onFiltered:function(t){this.resulttotalRows=t.length,this.currentPage=1},onRowSelected:function(t){console.log(t),t.length>0&&(this.$EventBus.$emit("tableFunc",t[0]),this.$bvModal.show(this.modalId2),this.tbselectdata=t[0])},onDelete:function(t){var e=this;h["a"].delete("".concat("https://foodycubeems.com","/device/cctv?cctvpath=").concat(t.cctvpath,"&cctvchannel=").concat(t.cctvchannel,"&token=").concat(this.tokenRead)).then((function(){e.makeToast("삭제 성공","게시글이 삭제되었습니다.")})),this.$bvModal.hide(this.modalId2),this.filterTableItems=this.filterTableItems.filter((function(e){return e.time!==t.time}))},onRegister:function(t){this.data={cctvpath:t.cctvinfo[0].cctvpath,cctvchannel:t.cctvinfo[0].cctvchannel,cctvlabel:t.cctvinfo[0].cctvlabel,tag:t.cctvinfo[0].tag,reg_id:t.cctvinfo[0].reg_id},this.filterTableItems.push(this.data)}},watch:{filterTableItems:function(){this.resulttotal=this.filterTableItems.length,this.currentPage=1}},created:function(){var t=this;return Object(l["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].get("".concat("https://foodycubeems.com","/device/cctv?tag=alldatas&limit=9999&page=").concat(t.currentPage,"&token=").concat(t.tokenRead)).then((function(e){e.data.message.results?t.filterTableItems=e.data.message.results.map((function(t){return t})):t.makeToast("조회 실패","게시글을 읽어오지 못했습니다.")}));case 2:case"end":return e.stop()}}),e)})))()}},w=x,B=Object(p["a"])(w,o,n,!1,null,null,null);e["default"]=B.exports},fe63:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return!0===t.modalOpen?e("b-button",{attrs:{variant:t.buttonColorProps},on:{click:function(e){return t.$bvModal.show(t.modalName)}}},[t._v(t._s(t.btnText))]):!0===t.modalClose?e("b-button",{attrs:{variant:t.buttonColorProps},on:{click:function(e){return t.$bvModal.hide(t.modalName)}}},[t._v(t._s(t.btnText))]):e("b-button",{attrs:{variant:t.buttonColorProps},on:{click:t.buttonFunc}},[t._v(t._s(t.btnText))])},n=[],c={name:"DefaultButton",data:function(){return{}},props:{btnText:{type:String,required:!0,default:"Button"},buttonColorProps:{type:String,required:!0,default:"ButtonColor"},buttonEvent:{type:Function,required:!1},modalOpen:{type:Boolean,required:!1},modalClose:{type:Boolean,required:!1},modalName:{type:String,required:!1},buttonFunc:{type:Function,required:!1}}},l=c,s=a("2877"),r=Object(s["a"])(l,o,n,!1,null,null,null);e["a"]=r.exports}}]);