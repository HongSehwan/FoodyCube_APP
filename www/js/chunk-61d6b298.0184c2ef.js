(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61d6b298"],{"11ee":function(t,e,s){"use strict";s("a28d")},"67c4":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("b-card",{staticClass:"mb-4"},[e("h1",{staticClass:"sub-title"},[t._v("수매 조회")]),e("PurchaseListModal",{on:{tableRegisterFunc:t.onRegister}}),e("FilterWriteboard",{attrs:{contactListForm:t.contactListForm,columns:t.columns,rows:t.rows,selected:t.selected,options:t.options,targetColumn:t.targetColumn,subSelected:t.subSelected,subOptions:t.subOptions,doubleFilterType:t.filterState,btnState:t.btnState,datePickerState:t.datePickerState,pageModalId2:t.modalId,path:t.pathName,recordInfo:t.processingData,modifyCheckMode:t.changeRegCheck}})],1)],1)},o=[],c=s("2791"),n=s("8468"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"row"},[e("b-col",{attrs:{md:"6"}},[e("b-modal",{ref:"modal-purchaseList",attrs:{id:"modal-purchaseList",title:"수매 조회"},scopedSlots:t._u([!1===t.changeMode?{key:"modal-footer",fn:function(s){return Object(n["a"])(s),[e("b-row",[e("div",{staticClass:"col modal-btn-list text-right"},[e("DefaultButton",{attrs:{btnText:t.changeBtn,buttonColorProps:t.changeBtnColor,buttonFunc:t.onModify}}),e("DefaultButton",{attrs:{block:"",btnText:t.cancelBtn,buttonColorProps:t.cancelBtnColor,modalOpen:t.showModal,modalClose:t.hideModal,modalName:t.modalId}})],1)])]}}:{key:"modal-footer",fn:function(s){return Object(n["a"])(s),[e("b-row",[e("div",{staticClass:"col modal-btn-list text-right"},[e("DefaultButton",{attrs:{btnText:t.successBtn,buttonColorProps:t.successBtnColor,buttonFunc:t.onRegister}}),e("DefaultButton",{attrs:{block:"",btnText:t.cancelBtn,buttonColorProps:t.cancelBtnColor,modalOpen:t.showModal,modalClose:t.hideModal,modalName:t.modalId}})],1)])]}}],null,!0)},[e("b-row",[e("b-col",{staticClass:"text-14",attrs:{md:"12"}},[e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("수확곤충크기(령)")]),e("b-col",[t._v(t._s(t.tbselectdata.OUT_INSECT))])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("먹이종류")]),e("b-col",[t._v(t._s(t.tbselectdata.FEED_TYPE))])],1),e("b-row",[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("무게(g)")]),e("b-col",[t._v(t._s(t.tbselectdata.OUT_WEIGHT))])],1)],1)],1),e("hr",{staticClass:"hr-solid"}),e("b-row",[e("b-col",{staticClass:"mb-3",attrs:{md:"12"}},[e("h4",{staticClass:"modal-sub-tit"},[t._v("신청 정보")])]),e("b-col",{staticClass:"text-14",attrs:{md:"12"}},[e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("신청일")]),e("b-col",[t._v(t._s(t.res_date))])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("수매요청일자")]),e("b-col",[t._v(t._s(t.tbselectdata.REQ_DELIVERY_DATE))])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("업체명")]),e("b-col",[t._v(t._s(t.companyName))])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("담당자")]),e("b-col",[t._v(t._s(JSON.parse(t.localStorage.getItem("userInfo"))[0].USERLABEL))])],1),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("연락처")]),e("b-col",[t._v(t._s(JSON.parse(t.localStorage.getItem("userInfo"))[0].HP_NO))])],1),e("b-row",[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("비고")]),e("b-col",[t._v(t._s())])],1)],1)],1),e("hr",{staticClass:"hr-solid"}),e("b-row",[e("b-col",{staticClass:"text-14",attrs:{md:"12"}},[e("b-row",{staticClass:"align-items-center"},[e("b-col",{staticClass:"col-4 text-gray-800"},[t._v("진행상태")]),!1===t.changeMode?e("b-col",{staticClass:"col-4"},[e("b-form-select",{staticClass:"__readonly",attrs:{options:t.statusOrOptions,disabled:""},model:{value:t.tbselectdata.STATUS_TYPE,callback:function(e){t.$set(t.tbselectdata,"STATUS_TYPE",e)},expression:"tbselectdata.STATUS_TYPE"}})],1):e("b-col",{staticClass:"col-4"},["신청완료"===t.tbselectdata.STATUS_TYPE?e("b-form-select",{attrs:{options:t.statusOptions1},model:{value:t.requestInfo.status_type,callback:function(e){t.$set(t.requestInfo,"status_type",e)},expression:"requestInfo.status_type"}}):"신청확인"===t.tbselectdata.STATUS_TYPE?e("b-form-select",{attrs:{options:t.statusOptions2},model:{value:t.requestInfo.status_type,callback:function(e){t.$set(t.requestInfo,"status_type",e)},expression:"requestInfo.status_type"}}):e("b-form-select",{attrs:{options:t.statusOptions3},model:{value:t.requestInfo.status_type,callback:function(e){t.$set(t.requestInfo,"status_type",e)},expression:"requestInfo.status_type"}})],1)],1)],1)],1)],1)],1)],1)])},r=[],i=s("c7eb"),u=s("53ca"),d=s("1da1"),b=s("5530"),_=(s("99af"),s("4de4"),s("d3b7"),s("e9c4"),s("2f62")),m=s("fe63"),p=s("cee4"),f=s("c1df"),h=s.n(f);s("ed18").config();var I={data:function(){return{changeBtn:"변경",changeBtnColor:"primary",buttonText:"작성",buttonColor:"primary",btnState:!0,successBtn:"확인",successBtnColor:"primary",cancelBtn:"취소",cancelBtnColor:"line-fill-primary",hideModal:!0,showModal:!1,modalId:"modal-purchaseList",res_date:"",statusOrOptions:[{value:"예약가능",text:"예약가능"},{value:"신청완료",text:"신청완료"},{value:"신청확인",text:"신청확인"},{value:"출고완료",text:"출고완료"},{value:"확정",text:"확정"}],statusOptions1:[{value:"예약가능",text:"예약가능",disabled:!0},{value:"신청완료",text:"신청완료",disabled:!0},{value:"신청확인",text:"신청확인"},{value:"출고완료",text:"출고완료",disabled:!0},{value:"확정",text:"확정",disabled:!0}],statusOptions2:[{value:"예약가능",text:"예약가능",disabled:!0},{value:"신청완료",text:"신청완료",disabled:!0},{value:"신청확인",text:"신청확인",disabled:!0},{value:"출고완료",text:"출고완료",disabled:!0},{value:"확정",text:"확정",disabled:!0}],statusOptions3:[{value:"예약가능",text:"예약가능",disabled:!0},{value:"신청완료",text:"신청완료",disabled:!0},{value:"신청확인",text:"신청확인",disabled:!0},{value:"출고완료",text:"출고완료",disabled:!0},{value:"확정",text:"확정"}],tbselectdata:{},regDate:"",changeMode:!1,companyInfo:[],companyName:"",requestInfo:{product_id:"",req_company_id:"",req_delivery_date:"",req_user_id:"",req_comment:"",status_type:"",token:""},processInfo:{in_date:"",out_date:"2022-10-10",feed_type:"",feed_comment:"-",weight:0,use_weight:0,stock_weight:0,price:0,delivery_charge:0,total_price:0,buyer_date:"",proccess:"-",product_weight:0,product_price:0,company_id:"",reg_id:"",token:""}}},computed:Object(b["a"])({},Object(_["c"])(["tokenRead","userIdRead","userInfoRead"])),created:function(){var t=this;return Object(d["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["a"].get("".concat("https://foodycubeems.com","/user/company?limit=10000&token=").concat(t.tokenRead)).then((function(e){e.data.message.results&&(t.companyInfo=e.data.message.results.filter((function(t){return t.COMPANYID===JSON.parse(localStorage.getItem("userInfo"))[0].COMPANY_ID})),t.companyName=t.companyInfo[0].COMPANYLABEL)}));case 2:return e.next=4,t.$EventBus.$on("tableFunc",function(t){this.changeMode=!1,this.tbselectdata=t[0],this.res_date=h()().format("YYYY-MM-DD"),this.regDate=t[0].REG_DATE,this.requestInfo.product_id=t[0].PRODUCT_ID,this.requestInfo.req_company_id=this.companyInfo[0].COMPANYID,this.requestInfo.req_delivery_date=t[0].REQ_DELIVERY_DATE,this.requestInfo.req_user_id=t[0].REQ_USER_ID,this.requestInfo.req_comment=t[0].REQ_COMMENT,this.requestInfo.status_type=t[0].STATUS_TYPE,this.processInfo.in_date=t[0].REQ_DELIVERY_DATE,this.processInfo.feed_type=t[0].FEED_TYPE,this.processInfo.feed_comment=t[0].FEED_COMMENT,this.processInfo.weight=t[0].OUT_WEIGHT,this.processInfo.stock_weight=t[0].OUT_WEIGHT,"object"!==Object(u["a"])(t[0].REQ_COMMENT)&&(t[0].REQ_COMMENT=JSON.parse(t[0].REQ_COMMENT)),this.processInfo.price=t[0].REQ_COMMENT.price,this.processInfo.delivery_charge=t[0].REQ_COMMENT.delivery_charge,this.processInfo.total_price=t[0].REQ_COMMENT.price+t[0].REQ_COMMENT.delivery_charge,this.processInfo.buyer_date=t[0].REQ_DELIVERY_DATE,this.processInfo.company_id=JSON.parse(localStorage.getItem("userInfo"))[0].COMPANY_ID,this.processInfo.reg_id=JSON.parse(localStorage.getItem("userInfo"))[0].USERID}.bind(t));case 4:case"end":return e.stop()}}),e)})))()},methods:{makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(e,{title:" ".concat(t||"default"),variant:t,solid:!0})},onRegister:function(){var t=this;"object"!==Object(u["a"])(this.requestInfo.req_comment)&&(this.requestInfo.req_comment=JSON.parse(this.requestInfo.req_comment)),this.requestInfo.req_comment.res_date=h()().format("YYYY-MM-DD HH:mm:ss"),this.requestInfo.req_comment=JSON.stringify(this.requestInfo.req_comment),this.requestInfo.token=this.tokenRead,p["a"].put("".concat("https://foodycubeems.com","/record/request"),this.requestInfo,{headers:{"Content-Type":"application/json"}}).then((function(e){0===e.data.errorcode?(t.$emit("tableRegisterFunc",[t.requestInfo,t.tbselectdata]),t.$bvModal.hide(t.modalId),t.processInfo.token=t.tokenRead,t.processInfo.stock_weight=t.processInfo.weight,"출고완료"===t.tbselectdata.STATUS_TYPE&&p["a"].post("".concat("https://foodycubeems.com","/record/process"),t.processInfo,{headers:{"Content-Type":"application/json"}}).then((function(t){console.log(t)})).catch((function(t){return console.log(t)}))):t.makeToast("등록 실패","등록에 실패했습니다.")})).catch((function(e){t.makeToast("등록 실패","등록에 실패했습니다."),console.log(e)}))},onModify:function(){this.changeMode=!0}},components:{DefaultButton:m["a"]}},E=I,g=(s("11ee"),s("2877")),T=Object(g["a"])(E,l,r,!1,null,null,null),C=T.exports;s("ed18").config();var v={name:"PurchaseList",metaInfo:{title:"Purchase List"},data:function(){return{selected:"전체",targetColumn:"history",subSelected:"empty",subOptions:["empty"],filterState:!1,btnState:!1,datePickerState:!0,pathName:"record/process",options:[{value:"전체",text:"전체"},{value:"예약가능",text:"예약가능"},{value:"신청완료",text:"신청완료"},{value:"신청확인",text:"신청확인"},{value:"출고완료",text:"출고완료"},{value:"확정",text:"확정"}],buttonColor:"primary",writeButton:"작성",modalId:"modal-purchaseList",contactListForm:[{PRODUCT_ID:"",REG_DATE:"",COMPANY_LABEL:"",REG_ID:"",TEL:"",OUT_INSECT:"",FEED_TYPE:"",OUT_WEIGHT:"",REQ_DELIVERY_DATE:"",STATUS_TYPE:""}],columns:[{label:"번호",key:"PRODUCT_ID",sortable:!0},{label:"신청일",key:"REQ_COMMENT.res_date",formatter:function(t){if(t)return t.split(" ")[0]}},{label:"업체명",key:"COMPANY_LABEL"},{label:"담당자",key:"REG_ID"},{label:"연락처",key:"TEL"},{label:"수확곤충크기(령)",key:"OUT_INSECT"},{label:"먹이종류",key:"FEED_TYPE"},{label:"총 무게(g)",key:"OUT_WEIGHT"},{label:"수매일자",key:"REQ_DELIVERY_DATE",formatter:function(t){if(t)return t.split(" ")[0]}},{label:"진행상태",key:"STATUS_TYPE"}],rows:[],changeRegCheck:!1,processingData:[],companyInfo:[],companyValue:[]}},methods:{makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(e,{title:" ".concat(t||"default"),variant:t,solid:!0})},onRegister:function(t){this.processingData=t,this.changeRegCheck=!this.changeRegCheck}},mounted:function(){"sm"==this.$screen.breakpoint||"xs"==this.$screen.breakpoint||"md"==this.$screen.breakpoint?this.isMobile=!0:this.isMobile=!1},components:{FilterWriteboard:c["a"],PurchaseListModal:C}},y=v,O=Object(g["a"])(y,a,o,!1,null,null,null);e["default"]=O.exports},a28d:function(t,e,s){}}]);