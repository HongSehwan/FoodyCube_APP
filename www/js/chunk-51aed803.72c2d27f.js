(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51aed803"],{"1c4d":function(t,e,a){"use strict";a("2aed")},"2aed":function(t,e,a){},8468:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("d9e2");function o(t){if(null==t)throw new TypeError("Cannot destructure "+t)}},a552:function(t,e,a){},a98c:function(t,e,a){"use strict";a("a552")},dec3:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content admin-content"},[e("b-card",{staticClass:"mb-4"},[e("h1",{staticClass:"sub-title"},[t._v("접근권한 관리")]),e("b-row",[e("b-col",{attrs:{lg:"5 mb-3"}},[e("DatePicker",{attrs:{readOnlySelected:t.readOnlyDate},on:{dateValue:t.dateFunc}})],1),e("b-col",{staticClass:"text-right mb-3",attrs:{lg:"7"}},[e("DefaultButton",{attrs:{btnText:t.outlineDefaultText,buttonColorProps:t.outlineDefaultColor,buttonFunc:t.clearFunc}})],1)],1),e("b-row",[e("b-col",{staticClass:"mb-3",attrs:{lg:"5"}},[e("b-form-select",{attrs:{options:t.mainOptions},model:{value:t.mainSelected,callback:function(e){t.mainSelected=e},expression:"mainSelected"}})],1),e("b-col",{staticClass:"mb-3",attrs:{lg:"5"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:"검색어를 입력하세요"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})]),e("b-col",{staticClass:"text-right mb-3",attrs:{lg:"2"}},[e("DefaultButton",{attrs:{btnText:t.defaultButtonText,buttonColorProps:t.defaultButtonColor,modalOpen:t.showSearchModal,modalClose:t.hideSearchModal,buttonFunc:t.searchFunc}})],1)],1)],1),e("DefaultButton",{staticClass:"mb-4 ml-3 ml-md-0",attrs:{block:"",btnText:t.modalButtonText,buttonColorProps:t.defaultButtonColor,modalOpen:t.showModal,modalClose:t.hideModal,modalName:t.modalId}}),e("PermissionRegisterModal",{on:{tableRegisterFunc:t.onRegister}}),e("b-card",[e("b-row",{staticClass:"align-items-center"},[e("b-col",{staticClass:"admin-filter-list"},[e("b-form-select",{attrs:{options:t.subOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),e("div",{staticClass:"table-responsive"},[e("b-table",{ref:"table-adminModify",staticClass:"writeboardList",attrs:{id:"table-adminModify",items:t.filterTableItems,"current-page":t.currentPage,"per-page":t.perPage,fields:t.columns,"select-mode":t.tbselectMode,selectable:t.tbselectable,filter:t.tbfilter,"filter-included-fields":t.tbfilterOn,small:""},on:{filtered:t.onFiltered,"row-selected":t.onRowSelected}})],1),e("PermissionDeleteModal",{on:{tableDeleteFunc:t.onDelete}}),e("b-pagination",{attrs:{"total-rows":t.resulttotal,"per-page":t.perPage,"aria-controls":"alarm-table",align:"center"},on:{input:function(e){return t.fcPagination()}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},n=[],s=a("5530"),i=a("c7eb"),l=a("1da1"),r=(a("99af"),a("d81d"),a("4de4"),a("d3b7"),a("caad"),a("2532"),a("14d9"),a("2f62")),c=a("e9f4"),u=a("fe63"),d=a("8468"),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"row"},[e("b-col",{attrs:{md:"6"}},[e("b-modal",{ref:"modal-permissionRegister",attrs:{id:"modal-permissionRegister",title:"접근권한 등록"},scopedSlots:t._u([{key:"modal-footer",fn:function(a){return Object(d["a"])(a),[e("b-row",[e("div",{staticClass:"col modal-btn-list text-right"},[e("DefaultButton",{attrs:{btnText:t.successBtn,buttonColorProps:t.successBtnColor,buttonFunc:t.onRegister}}),e("DefaultButton",{attrs:{block:"",btnText:t.cancelBtn,buttonColorProps:t.cancelBtnColor,modalOpen:t.showModal,modalClose:t.hideModal,modalName:t.modalId}})],1)])]}}])},[e("b-col",{staticClass:"form-group mb-2",attrs:{md:"14"}},[e("div",{staticClass:"col-form-label"},[t._v("아이디")]),e("b-form-select",{attrs:{options:t.userIdInfo},model:{value:t.selectedId,callback:function(e){t.selectedId=e},expression:"selectedId"}})],1),e("b-col",{staticClass:"form-group mb-2",attrs:{md:"14"}},[e("div",{staticClass:"col-form-label"},[t._v("성명")]),e("b-form-input",{attrs:{id:"ceo",placeholder:"이름",readonly:""},model:{value:t.permissionInfo.userlabel,callback:function(e){t.$set(t.permissionInfo,"userlabel",e)},expression:"permissionInfo.userlabel"}})],1),e("b-col",{staticClass:"form-group mb-2",attrs:{md:"14"}},[e("div",{staticClass:"col-form-label"},[t._v("농장명")]),e("b-form-select",{attrs:{id:"type",options:t.mainOptions},model:{value:t.permissionInfo.tag,callback:function(e){t.$set(t.permissionInfo,"tag",e)},expression:"permissionInfo.tag"}})],1)],1)],1)],1)])},f=[],h=a("cee4");a("ed18").config();var b={data:function(){return{buttonColor:"primary",successBtn:"등록",successBtnColor:"primary",cancelBtn:"취소",cancelBtnColor:"line-fill-primary",hideModal:!0,showModal:!1,modalId:"modal-permissionRegister",mainOptions:[],userIdInfo:[],userInfo:[],selectedId:"",permissionInfo:{userid:"",userlabel:"",tag:"",reg_id:"",token:""}}},created:function(){var t=this;this.mainOptions=this.farmRead,h["a"].get("".concat("https://foodycubeems.com","/user?limit=10000&token=").concat(this.tokenRead)).then((function(e){e.data.message.results&&(t.userIdInfo=e.data.message.results.map((function(t){return t.USERID})),t.userInfo=e.data.message.results.map((function(t){return t})))})),h["a"].get("".concat("https://foodycubeems.com","/user/farm?limit=10000&token=").concat(this.tokenRead)).then((function(e){e.data.message.results&&(t.mainOptions=e.data.message.results.map((function(t){return t.farmlabel})))}))},computed:Object(s["a"])({},Object(r["c"])(["tokenRead","userIdRead","farmRead","userInfoRead"])),watch:{selectedId:function(){var t=this;this.permissionInfo.userid=this.selectedId,this.filterInfo=this.userInfo.filter((function(e){return e.USERID===t.selectedId})),this.permissionInfo.userlabel=this.filterInfo[0].USERLABEL}},methods:{makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(e,{title:" ".concat(t||"default"),variant:t,solid:!0})},onRegister:function(){var t=this;this.permissionInfo.userid?this.permissionInfo.userlabel?this.permissionInfo.tag?(this.permissionInfo.reg_id=this.userIdRead,this.permissionInfo.token=this.tokenRead,h["a"].post("".concat("https://foodycubeems.com","/user/permission"),this.permissionInfo,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log(e),0===e.data.errorcode?(t.$emit("tableRegisterFunc",t.permissionInfo),t.$bvModal.hide(t.modalId)):t.makeToast("등록 실패","중복된 정보가 있습니다.")})).catch((function(e){t.makeToast("등록 실패","등록에 실패했습니다."),console.log(e)}))):this.makeToast("등록 실패","농장명을 선택해주세요."):this.makeToast("등록 실패","이름을 입력해주세요."):this.makeToast("등록 실패","아이디를 입력해주세요.")}},components:{DefaultButton:u["a"]}},p=b,g=(a("a98c"),a("2877")),v=Object(g["a"])(p,m,f,!1,null,null,null),D=v.exports,I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"row"},[e("b-col",{attrs:{md:"6"}},[e("b-modal",{ref:"modal-permissionDelete",attrs:{id:"modal-permissionDelete",title:"접근권한 조회"},scopedSlots:t._u([{key:"modal-footer",fn:function(a){return Object(d["a"])(a),[e("b-row",[e("div",{staticClass:"modal-btn-list col-8 text-right"},[e("DefaultButton",{attrs:{btnText:t.deleteBtn,buttonColorProps:t.deleteBtnColor,buttonFunc:t.onDelete}}),e("DefaultButton",{attrs:{block:"",btnText:t.cancelBtn,buttonColorProps:t.cancelBtnColor,modalOpen:t.showModal,modalClose:t.hideModal,modalName:t.modalId2}})],1)])]}}])},[e("h2",[t._v("해당 접근 권한을 삭제하시겠습니까?")])])],1)],1)])},C=[];a("ed18").config();var k={data:function(){return{deleteBtn:"삭제",deleteBtnColor:"outline-danger",cancelBtn:"취소",cancelBtnColor:"line-fill-primary",hideModal:!0,showModal:!1,modalId2:"modal-permissionDelete",tbselectdata:{}}},created:function(){this.$EventBus.$on("tableFunc",function(t){this.changeMode=!1,this.tbselectdata=t}.bind(this))},methods:{onDelete:function(){this.$emit("tableDeleteFunc",this.tbselectdata)}},components:{DefaultButton:u["a"]}},y=k,w=(a("1c4d"),Object(g["a"])(y,I,C,!1,null,null,null)),M=w.exports,x=a("c1df"),B=a.n(x);a("ed18").config();var P={metaInfo:{title:"Permission"},data:function(){return{buttonText:"등록하기",buttonColor:"primary",outlineDefaultText:"옵션리셋",outlineDefaultColor:"line-fill-primary",defaultButtonText:"검색하기",defaultButtonColor:"primary",mainSelected:"전체",mainOptions:[{value:"전체",text:"전체"}],subOptions:[10,30,50,100,{value:1e4,text:"Show a lot"}],columns:[{label:"등록일",key:"time",formatter:function(t){if(t)return t.split(" ")[0]}},{label:"아이디",key:"userid"},{label:"성명",key:"userlabel"},{label:"농장명",key:"tag"},{label:"등록자",key:"reg_id"}],filterTableItems:[],fields:[],tbselectMode:"single",tbselectable:!0,resulttotalRows:1,searchQuery:"",tbfilter:null,tbfilterOn:[],perPage:10,currentPage:1,oldPage:1,resulttotal:0,hideModal:!1,showModal:!0,showSearchModal:!1,hideSearchModal:!1,modalId:"modal-permissionRegister",modalId2:"modal-permissionDelete",modalButtonText:"등록하기",modalButtonColor:"primary",dateVal:"",dateStart:"",dateEnd:"",readOnlyDate:!1,userInfo:[],companyInfo:[]}},components:{DatePicker:c["a"],DefaultButton:u["a"],PermissionRegisterModal:D,PermissionDeleteModal:M},created:function(){var t=this;return Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:h["a"].get("".concat("https://foodycubeems.com","/user/permission?limit=9999&token=").concat(t.tokenRead)).then((function(e){e.data.message.results?t.filterTableItems=e.data.message.results.map((function(t){return t})):t.makeToast("조회 실패","게시글을 읽어오지 못했습니다.")})).catch((function(e){t.makeToast("조회 실패","게시글을 읽어오지 못했습니다."),console.log(e)}));case 1:case"end":return e.stop()}}),e)})))()},mounted:function(){"sm"==this.$screen.breakpoint||"xs"==this.$screen.breakpoint||"md"==this.$screen.breakpoint?this.isMobile=!0:this.isMobile=!1},computed:Object(s["a"])({},Object(r["c"])(["tokenRead","userIdRead"])),methods:{makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;this.$bvToast.toast(e,{title:" ".concat(t||"default"),variant:t,solid:!0})},dateFunc:function(t){this.dateVal=t,this.startDate=new Date(this.dateVal[0]),this.endDate=new Date(this.dateVal[1]),this.dateVal&&(this.startYear=this.startDate.getFullYear(),this.startMonth=this.startDate.getMonth()+1>=10?this.startDate.getMonth()+1:"0".concat(this.startDate.getMonth()+1),this.startDay=this.startDate.getDate()>=10?this.startDate.getDate():"0".concat(this.startDate.getDate()),this.endYear=this.endDate.getFullYear(),this.endMonth=this.endDate.getMonth()+1>=10?this.endDate.getMonth()+1:"0".concat(this.endDate.getMonth()+1),this.endDay=this.endDate.getDate()>=10?this.endDate.getDate():"0".concat(this.endDate.getDate()),this.dateStart="".concat(this.startYear,"-").concat(this.startMonth,"-").concat(this.startDay," 00:00:00"),this.dateEnd="".concat(this.endYear,"-").concat(this.endMonth,"-").concat(this.endDay," 23:59:59"))},searchFunc:function(){var t=this;return Object(l["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.dateStart||!t.dateEnd){e.next=5;break}return e.next=3,h["a"].get("".concat("https://foodycubeems.com","/user/permission?limit=").concat(t.perPage,"&page=").concat(t.currentPage,"&datestart=").concat(t.dateStart,"&dateend=").concat(t.dateEnd,"&token=").concat(t.tokenRead)).then((function(e){e.data.message.results&&(t.dateSelected=e.data.message.results.map((function(t){return t})))}));case 3:e.next=7;break;case 5:return e.next=7,h["a"].get("".concat("https://foodycubeems.com","/user/permission?limit=100&token=").concat(t.tokenRead)).then((function(e){e&&(t.dateSelected=e.data.message.results.map((function(t){return t})))}));case 7:t.resultSearchValue=t.dateSelected.filter((function(e){return e.userid.includes(t.searchQuery)||e.userlabel.includes(t.searchQuery)||e.tag.includes(t.searchQuery)||e.reg_id.includes(t.searchQuery)})),t.filterTableItems=t.resultSearchValue;case 9:case"end":return e.stop()}}),e)})))()},clearFunc:function(){this.searchQuery="",this.mainSelected="전체"},fcPagination:function(){this.oldPage!=this.currentPage&&(this.oldPage=this.currentPage,this.tbfilter=null)},onFiltered:function(t){this.resulttotalRows=t.length,this.currentPage=1},onRowSelected:function(t){t.length>0&&(this.$EventBus.$emit("tableFunc",t[0]),this.$bvModal.show(this.modalId2),this.tbselectdata=t[0])},onDelete:function(t){var e=this;h["a"].delete("".concat("https://foodycubeems.com","/user/permission?userid=").concat(t.userid,"&tag=").concat(t.tag,"&token=").concat(this.tokenRead)).then((function(){e.makeToast("삭제 성공","게시글이 삭제되었습니다.")})).catch((function(t){return console.log(t)})),this.$bvModal.hide(this.modalId2),this.filterTableItems=this.filterTableItems.filter((function(e){return e.time!==t.time}))},onRegister:function(t){Object.assign(t,{time:B()().format("YYYY-MM-DD HH:mm:ss")}),this.filterTableItems.push(t)}},watch:{filterTableItems:function(){this.resulttotal=this.filterTableItems.length,this.currentPage=1}}},T=P,O=Object(g["a"])(T,o,n,!1,null,null,null);e["default"]=O.exports},fe63:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return!0===t.modalOpen?e("b-button",{attrs:{variant:t.buttonColorProps},on:{click:function(e){return t.$bvModal.show(t.modalName)}}},[t._v(t._s(t.btnText))]):!0===t.modalClose?e("b-button",{attrs:{variant:t.buttonColorProps},on:{click:function(e){return t.$bvModal.hide(t.modalName)}}},[t._v(t._s(t.btnText))]):e("b-button",{attrs:{variant:t.buttonColorProps},on:{click:t.buttonFunc}},[t._v(t._s(t.btnText))])},n=[],s={name:"DefaultButton",data:function(){return{}},props:{btnText:{type:String,required:!0,default:"Button"},buttonColorProps:{type:String,required:!0,default:"ButtonColor"},buttonEvent:{type:Function,required:!1},modalOpen:{type:Boolean,required:!1},modalClose:{type:Boolean,required:!1},modalName:{type:String,required:!1},buttonFunc:{type:Function,required:!1}}},i=s,l=a("2877"),r=Object(l["a"])(i,o,n,!1,null,null,null);e["a"]=r.exports}}]);